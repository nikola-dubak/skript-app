(function(e){function t(t){for(var n,s,i=t[0],u=t[1],c=t[2],p=0,f=[];p<i.length;p++)s=i[p],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&f.push(o[s][0]),o[s]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);l&&l(t);while(f.length)f.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,i=1;i<r.length;i++){var u=r[i];0!==o[u]&&(n=!1)}n&&(a.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},o={app:0},a=[];function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var l=u;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"02b1":function(e,t,r){"use strict";r("7f46")},"034f":function(e,t,r){"use strict";r("85ec")},4360:function(e,t,r){"use strict";(function(e){var n=r("1da1"),o=(r("96cf"),r("4de4"),r("d3b7"),r("e9c4"),r("ac1f"),r("1276"),r("25f0"),r("d81d"),r("2b0e")),a=r("2f62");o["default"].use(a["a"]),t["a"]=new a["a"].Store({state:{token:null,profiles:[],posts:[],feed:null,groups:[],follows:null,joinedGroupIds:null,joinedGroups:null,likedPostIds:[]},mutations:{setToken:function(e,t){e.token=t,localStorage.token=t},removeToken:function(e){e.token=null,localStorage.removeItem("token"),e.feed=null,e.follows=null,e.joinedGroupIds=null},addProfile:function(e,t){e.profiles.push(t)},addPost:function(e,t){e.posts.push(t)},setFeed:function(e,t){e.feed=t},addToFeed:function(e,t){e.feed.unshift(t)},addGroup:function(e,t){e.groups.push(t)},joinGroup:function(e,t){e.joinedGroupIds.push(t)},leaveGroup:function(e,t){e.joinedGroupIds=e.joinedGroupIds.filter((function(e){return e!=t}))},setFollows:function(e,t){e.follows=t},addFollow:function(e,t){e.follows.push(t)},removeFollow:function(e,t){e.follows=e.follows.filter((function(e){return e.followedId!=t.followedId}))},setJoinedGroupIds:function(e,t){e.joinedGroupIds=t},setLikedPostIds:function(e,t){e.likedPostIds=t},addLike:function(e,t){e.likedPostIds.push(t)},removeLike:function(e,t){e.likedPostIds=e.likedPostIds.filter((function(e){return e!=t}))}},actions:{register:function(e,t){return Object(n["a"])(regeneratorRuntime.mark((function r(){var n,o,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.next=3,fetch("http://localhost:9000/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:if(o=r.sent,o.ok){r.next=7;break}return alert("Registration failed"),r.abrupt("return",!1);case 7:return r.next=9,o.json();case 9:return a=r.sent,n("setToken",a.token),r.abrupt("return",!0);case 12:case"end":return r.stop()}}),r)})))()},login:function(e,t){return Object(n["a"])(regeneratorRuntime.mark((function r(){var n,o,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.next=3,fetch("http://localhost:9000/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:if(o=r.sent,o.ok){r.next=7;break}return alert("Login failed"),r.abrupt("return",!1);case 7:return r.next=9,o.json();case 9:return a=r.sent,n("setToken",a.token),r.abrupt("return",!0);case 12:case"end":return r.stop()}}),r)})))()},getUser:function(t){var r=t.state;if(!r.token)return null;var n=r.token.split(".")[1],o=e.from(n,"base64");return JSON.parse(o.toString())},createProfile:function(e,t){return Object(n["a"])(regeneratorRuntime.mark((function r(){var n,o,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,o=e.state,r.next=3,fetch("http://localhost:8000/api/profiles",{method:"POST",headers:{Authorization:"Bearer ".concat(o.token),"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:if(a=r.sent,a.ok){r.next=6;break}return r.abrupt("return",!1);case 6:return r.next=8,a.json();case 8:return s=r.sent,n("addProfile",s),r.abrupt("return",!0);case 11:case"end":return r.stop()}}),r)})))()},getProfile:function(e,t){return Object(n["a"])(regeneratorRuntime.mark((function r(){var n,o,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.commit,o=e.state,a=o.profiles.filter((function(e){return e.userId==t}))[0],!a){r.next=4;break}return r.abrupt("return",a);case 4:return r.next=6,fetch("http://localhost:8000/api/profiles/".concat(t),{headers:{Authorization:"Bearer ".concat(o.token)}});case 6:if(s=r.sent,s.ok){r.next=9;break}return r.abrupt("return",null);case 9:return r.next=11,s.json();case 11:return a=r.sent,n("addProfile",a),r.abrupt("return",a);case 14:case"end":return r.stop()}}),r)})))()},createPost:function(e,t){return Object(n["a"])(regeneratorRuntime.mark((function r(){var n,o,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,o=e.state,r.next=3,fetch("http://localhost:8000/api/posts",{method:"POST",headers:{Authorization:"Bearer ".concat(o.token),"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:if(a=r.sent,a.ok){r.next=6;break}return r.abrupt("return",!1);case 6:return r.next=8,a.json();case 8:return s=r.sent,n("addPost",s),n("addToFeed",s),r.abrupt("return",!0);case 12:case"end":return r.stop()}}),r)})))()},getPost:function(e,t){return Object(n["a"])(regeneratorRuntime.mark((function r(){var n,o,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.commit,o=e.state,a=o.posts.filter((function(e){return e.id==t}))[0],!a){r.next=4;break}return r.abrupt("return",a);case 4:return r.next=6,fetch("http://localhost:8000/api/posts/".concat(t),{headers:{Authorization:"Bearer ".concat(o.token)}});case 6:if(s=r.sent,s.ok){r.next=9;break}return r.abrupt("return",null);case 9:return r.next=11,s.json();case 11:return a=r.sent,n("addPost",a),r.abrupt("return",a);case 14:case"end":return r.stop()}}),r)})))()},getFeed:function(e){return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,n,o,a,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.commit,n=e.state,o=e.dispatch,!n.feed){t.next=3;break}return t.abrupt("return",n.feed);case 3:return t.next=5,o("getUser");case 5:return a=t.sent,t.next=8,fetch("http://localhost:8000/api/posts/users/".concat(a.id,"/feed"),{headers:{Authorization:"Bearer ".concat(n.token)}});case 8:if(s=t.sent,s.ok){t.next=11;break}return t.abrupt("return",null);case 11:return t.next=13,s.json();case 13:return i=t.sent,r("setFeed",i),t.abrupt("return",i);case 16:case"end":return t.stop()}}),t)})))()},getGroup:function(e,t){return Object(n["a"])(regeneratorRuntime.mark((function r(){var n,o,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.commit,o=e.state,a=o.groups.filter((function(e){return e.id==t}))[0],!a){r.next=4;break}return r.abrupt("return",a);case 4:return r.next=6,fetch("http://localhost:8000/api/groups/".concat(t),{headers:{Authorization:"Bearer ".concat(o.token)}});case 6:if(s=r.sent,s.ok){r.next=9;break}return r.abrupt("return",null);case 9:return r.next=11,s.json();case 11:return a=r.sent,n("addGroup",a),r.abrupt("return",a);case 14:case"end":return r.stop()}}),r)})))()},getFollows:function(e){return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,n,o,a,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.commit,n=e.state,o=e.dispatch,!n.follows){t.next=3;break}return t.abrupt("return",n.follows);case 3:return t.next=5,o("getUser");case 5:return a=t.sent,t.next=8,fetch("http://localhost:8000/api/follows/users/".concat(a.id),{headers:{Authorization:"Bearer ".concat(n.token)}});case 8:if(s=t.sent,s.ok){t.next=11;break}return t.abrupt("return",null);case 11:return t.next=13,s.json();case 13:return i=t.sent,r("setFollows",i),t.abrupt("return",i);case 16:case"end":return t.stop()}}),t)})))()},getJoinedGroupIds:function(e){return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,n,o,a,s,i,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.commit,n=e.state,o=e.dispatch,!n.joinedGroupIds){t.next=3;break}return t.abrupt("return",n.joinedGroupIds);case 3:return t.next=5,o("getUser");case 5:return a=t.sent,t.next=8,fetch("http://localhost:8000/api/groupMembers/users/".concat(a.id),{headers:{Authorization:"Bearer ".concat(n.token)}});case 8:if(s=t.sent,s.ok){t.next=11;break}return t.abrupt("return",null);case 11:return t.next=13,s.json();case 13:return i=t.sent,u=i.map((function(e){return e.groupId})),r("setJoinedGroupIds",u),t.abrupt("return",u);case 17:case"end":return t.stop()}}),t)})))()},joinGroup:function(e,t){return Object(n["a"])(regeneratorRuntime.mark((function r(){var n,o,a,s,i,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,o=e.state,a=e.dispatch,r.next=3,a("getUser");case 3:return s=r.sent,i={userId:s.id,groupId:t},r.next=7,fetch("http://localhost:8000/api/groupMembers",{method:"POST",headers:{Authorization:"Bearer ".concat(o.token),"Content-Type":"application/json"},body:JSON.stringify(i)});case 7:if(u=r.sent,u.ok){r.next=10;break}return r.abrupt("return",!1);case 10:return n("joinGroup",t),n("setFeed",null),r.next=14,a("getFeed");case 14:return r.abrupt("return",!0);case 15:case"end":return r.stop()}}),r)})))()},leaveGroup:function(e,t){return Object(n["a"])(regeneratorRuntime.mark((function r(){var n,o,a,s,i,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,o=e.state,a=e.dispatch,r.next=3,a("getUser");case 3:return s=r.sent,i={userId:s.id,groupId:t},r.next=7,fetch("http://localhost:8000/api/groupMembers",{method:"DELETE",headers:{Authorization:"Bearer ".concat(o.token),"Content-Type":"application/json"},body:JSON.stringify(i)});case 7:if(u=r.sent,u.ok){r.next=10;break}return r.abrupt("return",!1);case 10:return n("leaveGroup",t),n("setFeed",null),r.next=14,a("getFeed");case 14:return r.abrupt("return",!0);case 15:case"end":return r.stop()}}),r)})))()},follow:function(e,t){return Object(n["a"])(regeneratorRuntime.mark((function r(){var n,o,a,s,i,u,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,o=e.state,a=e.dispatch,r.next=3,a("getUser");case 3:return s=r.sent,i={followerId:s.id,followedId:t},r.next=7,fetch("http://localhost:8000/api/follows",{method:"POST",headers:{Authorization:"Bearer ".concat(o.token),"Content-Type":"application/json"},body:JSON.stringify(i)});case 7:if(u=r.sent,u.ok){r.next=10;break}return r.abrupt("return",!1);case 10:return r.next=12,u.json();case 12:return c=r.sent,n("addFollow",c),n("setFeed",null),r.next=17,a("getFeed");case 17:return r.abrupt("return",!0);case 18:case"end":return r.stop()}}),r)})))()},unfollow:function(e,t){return Object(n["a"])(regeneratorRuntime.mark((function r(){var n,o,a,s,i,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,o=e.state,a=e.dispatch,r.next=3,a("getUser");case 3:return s=r.sent,i={followerId:s.id,followedId:t},r.next=7,fetch("http://localhost:8000/api/follows",{method:"DELETE",headers:{Authorization:"Bearer ".concat(o.token),"Content-Type":"application/json"},body:JSON.stringify(i)});case 7:if(u=r.sent,u.ok){r.next=10;break}return r.abrupt("return",!1);case 10:return n("removeFollow",i),n("setFeed",null),r.next=14,a("getFeed");case 14:return r.abrupt("return",!0);case 15:case"end":return r.stop()}}),r)})))()},getLikedPostIds:function(e){return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,n,o,a,s,i,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.commit,n=e.state,o=e.dispatch,!n.getLikedPostIds){t.next=3;break}return t.abrupt("return",n.getLikedPostIds);case 3:return t.next=5,o("getUser");case 5:return a=t.sent,t.next=8,fetch("http://localhost:8000/api/likes/users/".concat(a.id),{headers:{Authorization:"Bearer ".concat(n.token)}});case 8:if(s=t.sent,s.ok){t.next=11;break}return t.abrupt("return",null);case 11:return t.next=13,s.json();case 13:return i=t.sent,u=i.map((function(e){return e.postId})),r("setLikedPostIds",u),t.abrupt("return",u);case 17:case"end":return t.stop()}}),t)})))()},like:function(e,t){return Object(n["a"])(regeneratorRuntime.mark((function r(){var n,o,a,s,i,u,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,o=e.state,a=e.dispatch,r.next=3,a("getUser");case 3:return s=r.sent,i={userId:s.id,postId:t},r.next=7,fetch("http://localhost:8000/api/likes",{method:"POST",headers:{Authorization:"Bearer ".concat(o.token),"Content-Type":"application/json"},body:JSON.stringify(i)});case 7:if(u=r.sent,u.ok){r.next=10;break}return r.abrupt("return",!1);case 10:return r.next=12,u.json();case 12:return c=r.sent,n("addLike",c.postId),r.abrupt("return",!0);case 15:case"end":return r.stop()}}),r)})))()},unlike:function(e,t){return Object(n["a"])(regeneratorRuntime.mark((function r(){var n,o,a,s,i,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,o=e.state,a=e.dispatch,r.next=3,a("getUser");case 3:return s=r.sent,i={userId:s.id,postId:t},r.next=7,fetch("http://localhost:8000/api/likes",{method:"DELETE",headers:{Authorization:"Bearer ".concat(o.token),"Content-Type":"application/json"},body:JSON.stringify(i)});case 7:if(u=r.sent,u.ok){r.next=10;break}return r.abrupt("return",!1);case 10:return n("removeLike",t),r.abrupt("return",!0);case 12:case"end":return r.stop()}}),r)})))()}}})}).call(this,r("b639").Buffer)},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"info"}},[r("b-navbar-brand",{attrs:{href:"#"}},[e._v("SocialNetwork")]),r("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),r("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[r("b-navbar-nav",[e.profile?r("b-nav-text",{attrs:{id:"text-welcome"}},[e._v("Welcome, "+e._s(e.profile.name)+"!")]):e._e(),r("b-nav-item",{attrs:{to:"/"}},[e._v("Home")]),e.token?r("b-nav-item",{attrs:{to:"/profiles/"+e.userId}},[e._v("My profile")]):e._e(),e.token?r("b-nav-item",{attrs:{to:"/groups"}},[e._v("My groups")]):e._e()],1),r("b-navbar-nav",{staticClass:"ml-auto"},[e.token?e._e():r("b-nav-item",{attrs:{to:"/register"}},[e._v("Register")]),e.token?r("b-nav-item",{on:{click:e.logout}},[e._v("Log Out")]):r("b-nav-item",{attrs:{to:"/login"}},[e._v("Log In")])],1)],1)],1),r("router-view")],1)},a=[],s=r("1da1"),i=r("5530"),u=(r("96cf"),r("2f62")),c={name:"App",data:function(){return{userId:null,searchQuery:"",profile:null}},computed:Object(i["a"])(Object(i["a"])({},Object(u["d"])(["token","profiles"])),{},{role:function(){if(!token)return null;var e=this.getUser();return e.role}}),watch:{token:function(e,t){var r=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e){t.next=10;break}return t.next=3,r.getUser();case 3:return n=t.sent,r.userId=n.id,t.next=7,r.getProfile(r.userId);case 7:r.profile=t.sent,t.next=13;break;case 10:r.userId=null,r.profile=null,r.$router.push({name:"Login"});case 13:case"end":return t.stop()}}),t)})))()},profiles:{handler:function(e,t){var r=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.getProfile(r.userId);case 2:r.profile=e.sent;case 3:case"end":return e.stop()}}),e)})))()},deep:!0}},created:function(){localStorage.token&&this.setToken(localStorage.token)},methods:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(u["b"])(["getUser","getProfile"])),Object(u["c"])(["setToken","removeToken"])),{},{logout:function(){this.removeToken()},search:function(e){e.preventDefault();var t=this.searchQuery;this.searchQuery="",this.$router.push({name:"Search",query:{q:t}})}})},l=c,p=(r("034f"),r("2877")),f=Object(p["a"])(l,o,a,!1,null,null,null),d=f.exports,m=r("8c4f"),b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("CreatePost"),e.feed?r("div",e._l(e.feed,(function(e){return r("Post",{key:e.id,attrs:{post:e}})})),1):e._e()],1)},h=[],g=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.token?r("b-form",{staticClass:"mx-auto",attrs:{id:"createPostForm"},on:{submit:e.onSubmit}},[r("b-form-group",{attrs:{id:"input-group-text",label:"Create new post","label-for":"input-name",description:"Tell us what's on your mind today!"}},[r("b-form-textarea",{attrs:{id:"input-text",placeholder:"Enter something...",rows:"3","no-resize":""},model:{value:e.form.text,callback:function(t){e.$set(e.form,"text",t)},expression:"form.text"}})],1),r("p",[e._v(" "+e._s(e.form.text.length)+" "),r("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Create post")])],1)],1):e._e()},v=[],w={name:"CreatePost",computed:Object(i["a"])({},Object(u["d"])(["token"])),data:function(){return{form:{userId:null,text:""}}},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getUser();case 2:if(r=t.sent,r){t.next=6;break}return e.$router.push({name:"Login"}),t.abrupt("return");case 6:e.form.userId=r.id;case 7:case"end":return t.stop()}}),t)})))()},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["getUser","createPost"])),{},{onSubmit:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.preventDefault(),(t.form.text.length<3||t.form.text.length>255)&&alert("Post text needs to be between 3 and 255 characters"),r.next=4,t.createPost(t.form);case 4:n=r.sent,n?t.form.text="":alert("Failed to create post!");case 6:case"end":return r.stop()}}),r)})))()}})},k=w,x=(r("9fa6"),Object(p["a"])(k,g,v,!1,null,"64ccd3b3",null)),j=x.exports,O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.profile?r("b-card",{staticClass:"card-profile-small",attrs:{"no-body":""}},[r("b-card-header",{class:e.group?"bg-secondary":"bg-info"},[r("b-link",{staticClass:"profile-link",attrs:{to:"/profiles/"+e.profile.userId}},[e._v(e._s(e.profile.name+" #"+e.profile.userId))]),e.group?r("b",{staticClass:"group-link"},[e._v(" in ")]):e._e(),e.group?r("b-link",{staticClass:"group-link",attrs:{to:"/groups/"+e.group.id}},[e._v(e._s(e.group.name+" #"+e.group.id))]):e._e()],1),r("b-card-body",[r("b-card-text",[e._v(e._s(e.post.text))]),e.likedPostIds?r("b-button-group",[e.likedPostIds.some((function(t){return t==e.post.id}))?r("b-button",{attrs:{variant:"danger"},on:{click:function(t){return e.unlike(e.post.id)}}},[e._v("Unlike")]):r("b-button",{attrs:{variant:"primary"},on:{click:function(t){return e.like(e.post.id)}}},[e._v("Like")])],1):e._e()],1),r("b-card-footer",{staticClass:"post-footer bg-light"},[e._v(" "+e._s("Posted at "+new Date(e.post.createdAt).toLocaleString("sr-RS"))+" ")])],1):e._e()},y=[],_={name:"Post",data:function(){return{user:null,profile:null,group:null}},computed:Object(i["a"])({},Object(u["d"])(["likedPostIds"])),methods:Object(i["a"])({},Object(u["b"])(["getUser","getProfile","getGroup","getLikedPostIds","like","unlike"])),mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getUser();case 2:return e.user=t.sent,t.next=5,e.getProfile(e.post.userId);case 5:return e.profile=t.sent,t.next=8,e.getLikedPostIds();case 8:if(!e.post.groupId){t.next=12;break}return t.next=11,e.getGroup(e.post.groupId);case 11:e.group=t.sent;case 12:case"end":return t.stop()}}),t)})))()},props:{post:Object}},R=_,P=(r("02b1"),Object(p["a"])(R,O,y,!1,null,null,null)),I=P.exports,G={name:"Home",computed:Object(i["a"])({},Object(u["d"])(["token","feed"])),mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.token){t.next=3;break}return e.$router.push({name:"Login"}),t.abrupt("return");case 3:return t.next=5,e.getUser();case 5:return r=t.sent,t.next=8,e.getProfile(r.id);case 8:if(n=t.sent,n){t.next=12;break}return e.$router.push({name:"CreateProfile"}),t.abrupt("return");case 12:return t.next=14,e.getFeed();case 14:case"end":return t.stop()}}),t)})))()},methods:Object(i["a"])({},Object(u["b"])(["getUser","getProfile","getFeed"])),components:{CreatePost:j,Post:I}},S=G,C=Object(p["a"])(S,b,h,!1,null,null,null),$=C.exports,T=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[e.show?r("b-form",{on:{submit:e.onSubmit,reset:e.onReset}},[r("b-form-group",{attrs:{id:"input-group-email",label:"Email address:","label-for":"input-email",description:"We'll never share your email with anyone else."}},[r("b-form-input",{attrs:{id:"input-email",type:"email",placeholder:"Enter email",required:""},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),r("b-form-group",{attrs:{id:"input-group-password",label:"Password:","label-for":"input-password",description:"We'll never share your password with anyone else."}},[r("b-form-input",{attrs:{id:"input-password",type:"password",placeholder:"Enter password",required:""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),r("b-form-group",{attrs:{id:"input-group-password-confirm",label:"Confirm password:","label-for":"input-password-confirm",description:"Confirm your password"}},[r("b-form-input",{attrs:{id:"input-password-confirm",type:"password",placeholder:"Confirm password",required:""},model:{value:e.confirmPassword,callback:function(t){e.confirmPassword=t},expression:"confirmPassword"}})],1),r("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Register")]),r("b-button",{attrs:{type:"reset",variant:"danger"}},[e._v("Reset")])],1):e._e()],1)},E=[],F=(r("caad"),r("2532"),{name:"Register",data:function(){return{form:{email:"",password:""},confirmPassword:"",show:!0}},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["register"])),{},{onSubmit:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.preventDefault(),t.form.email.includes("@")&&t.form.email.includes(".")||alert("Not a valid email"),t.form.password==t.confirmPassword){r.next=5;break}return alert("Password confirmation is not matching"),r.abrupt("return");case 5:return r.next=7,t.register(t.form);case 7:n=r.sent,n&&t.$router.push({name:"Home"});case 9:case"end":return r.stop()}}),r)})))()},onReset:function(e){var t=this;e.preventDefault(),this.form.email="",this.form.password="",this.confirmPassword="",this.show=!1,this.$nextTick((function(){t.show=!0}))}})}),L=F,U=Object(p["a"])(L,T,E,!1,null,null,null),J=U.exports,A=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[e.show?r("b-form",{on:{submit:e.onSubmit,reset:e.onReset}},[r("b-form-group",{attrs:{id:"input-group-email",label:"Email address:","label-for":"input-email"}},[r("b-form-input",{attrs:{id:"input-email",type:"email",placeholder:"Enter email",required:""},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),r("b-form-group",{attrs:{id:"input-group-password",label:"Password:","label-for":"input-password"}},[r("b-form-input",{attrs:{id:"input-password",type:"password",placeholder:"Enter password",required:""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),r("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Login")]),r("b-button",{attrs:{type:"reset",variant:"danger"}},[e._v("Reset")])],1):e._e(),r("p",[e._v(" Don't have an account? "),r("b-button",{attrs:{type:"button",variant:"success",to:"/register"}},[e._v("Register")])],1)],1)},B=[],z={name:"Login",data:function(){return{form:{email:"",password:""},show:!0}},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["login"])),{},{onSubmit:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.preventDefault(),t.form.email.includes("@")&&t.form.email.includes(".")||alert("Not a valid email"),r.next=4,t.login(t.form);case 4:n=r.sent,n&&t.$router.push({name:"Home"});case 6:case"end":return r.stop()}}),r)})))()},onReset:function(e){var t=this;e.preventDefault(),this.form.email="",this.form.password="",this.show=!1,this.$nextTick((function(){t.show=!0}))}})},D=z,N=Object(p["a"])(D,A,B,!1,null,null,null),M=N.exports,q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[e.show?r("b-form",{on:{submit:e.onSubmit,reset:e.onReset}},[r("b-form-group",{attrs:{id:"input-group-name",label:"Your name:","label-for":"input-name"}},[r("b-form-input",{attrs:{id:"input-name",placeholder:"Enter name",required:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("b-form-group",{attrs:{id:"input-group-birthday",label:"Your birthday:","label-for":"input-birthday"}},[r("b-form-datepicker",{staticClass:"mb-2",attrs:{id:"input-birthday"},model:{value:e.form.birthday,callback:function(t){e.$set(e.form,"birthday",t)},expression:"form.birthday"}})],1),r("b-form-group",{attrs:{id:"input-group-education",label:"Your education:","label-for":"input-education"}},[r("b-form-input",{attrs:{id:"input-education",placeholder:"Enter education"},model:{value:e.form.education,callback:function(t){e.$set(e.form,"education",t)},expression:"form.education"}})],1),r("b-form-group",{attrs:{id:"input-group-work",label:"Your work:","label-for":"input-work"}},[r("b-form-input",{attrs:{id:"input-work",placeholder:"Enter work"},model:{value:e.form.work,callback:function(t){e.$set(e.form,"work",t)},expression:"form.work"}})],1),r("b-form-group",{attrs:{id:"input-group-city",label:"Your city:","label-for":"input-city"}},[r("b-form-input",{attrs:{id:"input-city",placeholder:"Enter city"},model:{value:e.form.city,callback:function(t){e.$set(e.form,"city",t)},expression:"form.city"}})],1),r("b-form-group",{attrs:{id:"input-group-relationship",label:"Relationship status:","label-for":"input-relationship"}},[r("b-form-select",{attrs:{id:"input-relationship",options:e.relationshipStatuses},model:{value:e.form.relationship,callback:function(t){e.$set(e.form,"relationship",t)},expression:"form.relationship"}})],1),r("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Create profile")]),r("b-button",{attrs:{type:"reset",variant:"danger"}},[e._v("Reset")])],1):e._e()],1)},H=[],Y=(r("b0c0"),{name:"CreateProfile",data:function(){return{form:{userId:0,name:"",birthday:"",education:"",work:"",city:"",relationship:""},relationshipStatuses:["","single","taken"],show:!0}},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getUser();case 2:if(r=t.sent,r){t.next=6;break}return e.$router.push({name:"Login"}),t.abrupt("return");case 6:e.form.userId=r.id;case 7:case"end":return t.stop()}}),t)})))()},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["getUser","createProfile"])),{},{onSubmit:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.preventDefault(),r.next=3,t.createProfile(t.form);case 3:n=r.sent,n?t.$router.push({path:"/profile/".concat(t.form.userId)}):alert("Failed to create profile!");case 5:case"end":return r.stop()}}),r)})))()},onReset:function(e){var t=this;e.preventDefault(),this.form.name="",this.form.birthday="",this.form.education="",this.form.work="",this.form.city="",this.form.relationship="",this.show=!1,this.$nextTick((function(){t.show=!0}))}})}),W=Y,Q=Object(p["a"])(W,q,H,!1,null,null,null),K=Q.exports,V=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.profile?r("div",{staticClass:"container"},[r("b-card",{staticClass:"card-profile-small bg-dark",attrs:{"no-body":""}},[r("b-card-header",{staticClass:"bg-dark"},[r("b-link",{staticClass:"profile-link",attrs:{to:"/profiles/"+e.profile.userId}},[e._v(e._s(e.profile.name+" #"+e.profile.userId)+" ")]),e.profile.userId!=e.user.id&&e.follows?r("b-button-group",[e.follows.some((function(t){return t.followedId==e.profile.userId}))?r("b-button",{attrs:{variant:"danger"},on:{click:function(t){return e.unfollow(e.profile.userId)}}},[e._v("Unfollow")]):r("b-button",{attrs:{variant:"primary"},on:{click:function(t){return e.follow(e.profile.userId)}}},[e._v("Follow")])],1):e._e()],1),r("b-card-body",[r("ProfileAbout",{attrs:{profile:e.profile}})],1),r("b-card-footer",{staticClass:"profile-footer bg-dark text-light"},[e._v(" "+e._s("Joined at "+new Date(e.profile.createdAt).toLocaleString("sr-RS"))+" ")])],1),e.feed?r("div",e._l(e.feed.filter((function(t){return t.userId==e.profile.userId})),(function(e){return r("Post",{key:e.id,attrs:{post:e}})})),1):e._e()],1):e._e()},X=[],Z=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-list-group",[e.profile.birthday?r("b-list-group-item",{attrs:{variant:"dark"}},[r("b",[e._v("Birthday:")]),e._v(" "+e._s(new Date(e.profile.birthday).toDateString()))]):e._e(),e.profile.education?r("b-list-group-item",{attrs:{variant:"dark"}},[r("b",[e._v("Education:")]),e._v(" "+e._s(e.profile.education))]):e._e(),e.profile.work?r("b-list-group-item",{attrs:{variant:"dark"}},[r("b",[e._v("Work:")]),e._v(" "+e._s(e.profile.work))]):e._e(),e.profile.city?r("b-list-group-item",{attrs:{variant:"dark"}},[r("b",[e._v("City:")]),e._v(" "+e._s(e.profile.city))]):e._e(),e.profile.relationship?r("b-list-group-item",{attrs:{variant:"dark"}},[r("b",[e._v("Relationship: ")]),e._v(" "+e._s(e.profile.relationship))]):e._e()],1)},ee=[],te={name:"ProfileAbout",props:{profile:Object}},re=te,ne=Object(p["a"])(re,Z,ee,!1,null,null,null),oe=ne.exports,ae={name:"Profile",data:function(){return{user:null,profile:null,posts:null}},computed:Object(i["a"])({},Object(u["d"])(["feed","follows"])),methods:Object(i["a"])({},Object(u["b"])(["getUser","getProfile","getFollows","getFeed","follow","unfollow"])),mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getUser();case 2:return e.user=t.sent,t.next=5,e.getProfile(e.$route.params.id);case 5:return e.profile=t.sent,t.next=8,e.getFollows();case 8:return t.next=10,e.getFeed();case 10:case"end":return t.stop()}}),t)})))()},components:{ProfileAbout:oe,Post:I}},se=ae,ie=Object(p["a"])(se,V,X,!1,null,null,null),ue=ie.exports,ce=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[e.group&&e.feed?r("div",[r("GroupSmall",{attrs:{group:e.group}}),e._l(e.feed.filter((function(t){return t.groupId==e.group.id})),(function(e){return r("Post",{key:e.id,attrs:{post:e}})}))],2):r("h2",[e._v("Group not found!")])])},le=[],pe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.joinedGroupIds?r("b-card",{attrs:{"bg-variant":"dark","text-variant":"white",title:e.group.name+" #"+e.group.id,"sub-title":e.group.description}},[e.joinedGroupIds.some((function(t){return t==e.group.id}))?r("b-button",{attrs:{variant:"danger"},on:{click:e.leave}},[e._v("Leave group")]):r("b-button",{attrs:{variant:"primary"},on:{click:e.join}},[e._v("Join group")])],1):e._e()},fe=[],de={name:"GroupSmall",mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getJoinedGroupIds();case 2:case"end":return t.stop()}}),t)})))()},computed:Object(i["a"])({},Object(u["d"])(["joinedGroupIds"])),methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["getJoinedGroupIds","joinGroup","leaveGroup"])),{},{join:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.joinGroup(e.group.id);case 2:case"end":return t.stop()}}),t)})))()},leave:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.leaveGroup(e.group.id);case 2:case"end":return t.stop()}}),t)})))()}}),props:{group:Object}},me=de,be=Object(p["a"])(me,pe,fe,!1,null,"0fc35375",null),he=be.exports,ge={name:"Group",data:function(){return{group:null}},computed:Object(i["a"])({},Object(u["d"])(["feed"])),methods:Object(i["a"])({},Object(u["b"])(["getGroup","getFeed"])),mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getGroup(e.$route.params.id);case 2:return e.group=t.sent,t.next=5,e.getFeed();case 5:case"end":return t.stop()}}),t)})))()},components:{GroupSmall:he,Post:I}},ve=ge,we=Object(p["a"])(ve,ce,le,!1,null,"7ed2a406",null),ke=we.exports,xe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[e.post?r("Post",{attrs:{post:e.post}}):e._e()],1)},je=[],Oe={name:"PostPage",data:function(){return{post:null}},methods:Object(i["a"])({},Object(u["b"])(["getPost"])),mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getPost(e.$route.params.id);case 2:e.post=t.sent;case 3:case"end":return t.stop()}}),t)})))()},components:{Post:I}},ye=Oe,_e=Object(p["a"])(ye,xe,je,!1,null,null,null),Re=_e.exports,Pe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},e._l(e.joinedGroups,(function(e){return r("GroupSmall",{key:e.id,attrs:{group:e}})})),1)},Ie=[],Ge={name:"MyGroups",data:function(){return{joinedGroups:[]}},computed:Object(i["a"])({},Object(u["d"])(["joinedGroupIds"])),watch:{joinedGroupIds:{handler:function(e,t){var r=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.getJoinedGroups();case 2:r.joinedGroups=e.sent;case 3:case"end":return e.stop()}}),e)})))()},deep:!0}},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getJoinedGroupIds();case 2:return t.next=4,e.getJoinedGroups();case 4:e.joinedGroups=t.sent;case 5:case"end":return t.stop()}}),t)})))()},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["getJoinedGroupIds","getGroup"])),{},{getJoinedGroups:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=[],n=0;case 2:if(!(n<e.joinedGroupIds.length)){t.next=10;break}return t.next=5,e.getGroup(e.joinedGroupIds[n]);case 5:o=t.sent,o&&r.push(o);case 7:n++,t.next=2;break;case 10:return t.abrupt("return",r);case 11:case"end":return t.stop()}}),t)})))()}}),components:{GroupSmall:he}},Se=Ge,Ce=Object(p["a"])(Se,Pe,Ie,!1,null,null,null),$e=Ce.exports;n["default"].use(m["a"]);var Te=[{path:"/",name:"Home",component:$},{path:"/register",name:"Register",component:J},{path:"/login",name:"Login",component:M},{path:"/create-profile",name:"CreateProfile",component:K},{path:"/profiles/:id",name:"Profile",component:ue},{path:"/groups/:id",name:"Group",component:ke},{path:"/posts/:id",name:"PostPage",component:Re},{path:"/groups",name:"MyGroups",component:$e}],Ee=new m["a"]({mode:"history",base:"/",routes:Te}),Fe=Ee,Le=r("4360"),Ue=r("5f5b"),Je=r("b1e0");r("f9e3"),r("2dd8");n["default"].use(Ue["a"]),n["default"].use(Je["a"]),n["default"].config.productionTip=!1,new n["default"]({router:Fe,store:Le["a"],render:function(e){return e(d)}}).$mount("#app")},"7f46":function(e,t,r){},"85ec":function(e,t,r){},"9fa6":function(e,t,r){"use strict";r("c88f")},c88f:function(e,t,r){}});
//# sourceMappingURL=app.038e8a3b.js.map